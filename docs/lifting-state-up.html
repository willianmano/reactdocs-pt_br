

<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Subindo o estado - React</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta property="og:title" content="Subindo o estado - React">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://facebook.github.io/react/docs/lifting-state-up.html">
  <meta property="og:image" content="https://facebook.github.io/react/img/logo_og.png">
  <meta property="og:description" content="A JavaScript library for building user interfaces">
  <meta property="fb:app_id" content="623268441017527">

  <link rel="shortcut icon" href="/favicon.ico">
  <link rel="alternate" type="application/rss+xml" title="React" href="https://facebook.github.io/reactdocs-pt_br/feed.xml">

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css" />
  <link rel="stylesheet" href="/reactdocs-pt_br/css/syntax.css">
  <link rel="stylesheet" href="/reactdocs-pt_br/css/codemirror.css">
  <link rel="stylesheet" href="/reactdocs-pt_br/css/react.css">

  <script src="//use.typekit.net/vqa1hcx.js"></script>
  <script>try{Typekit.load();}catch(e){}</script>

  <!--[if lte IE 8]>
  <script src="/react/js/html5shiv.min.js"></script>
  <script src="/react/js/es5-shim.min.js"></script>
  <script src="/react/js/es5-sham.min.js"></script>
  <![endif]-->
  <script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script>
  <script src="/reactdocs-pt_br/js/codemirror.js"></script>
  <script src="/reactdocs-pt_br/js/javascript.js"></script>
  <script src="/reactdocs-pt_br/js/xml.js"></script>
  <script src="/reactdocs-pt_br/js/jsx.js"></script>
  <script src="/reactdocs-pt_br/js/react.js"></script>
  <script src="/reactdocs-pt_br/js/react-dom.js"></script>
  <script src="/reactdocs-pt_br/js/babel.min.js"></script>
  <script src="/reactdocs-pt_br/js/live_editor.js"></script>
</head>
<body>

  <div class="container">

    <div class="nav-main">
  <div class="wrap">
    <a class="nav-home" href="/reactdocs-pt_br">
      <img class="nav-logo" src="/reactdocs-pt_br/img/logo.svg" width="36" height="36">
      React
    </a>
    <div class="nav-lists">
      <ul class="nav-site nav-site-internal">
        <li><a href="/reactdocs-pt_br/docs/hello-world.html" class="active">Documentação</a></li>
        <li><a href="/tutorial/tutorial.html">Tutorial</a></li>
        <li><a href="/community/support.html">Comunidade</a></li>
      </ul>
      <ul class="nav-site nav-site-external">
        <li><a href="https://github.com/facebook/react">GitHub</a></li>
        <li><a href="https://github.com/facebook/react/releases">v15.4.0</a></li>
      </ul>
    </div>
  </div>
</div>


    <section class="content wrap documentationContent">
  <div class="inner-content">
    <a class="edit-page-link" href="https://github.com/facebook/react/tree/master/docs/docs/lifting-state-up.md" target="_blank">Edit on GitHub</a>
    <h1>
      Subindo o estado
    </h1>
    <div class="subHeader"></div>

    <p>Frequentemente, vários componentes precisam refletir a mesma mudança de dados. Nós recomendamos subir o estado compartilhado para seu ancestrai comun mais próximo. Vamos ver este trabalho em ação.</p>

<p>Nesta seção, vamos criar uma calculadora de temperatura que calcula se água ferve a uma dada temperatura.</p>

<p>Vamos começar com um componente chamado <code>BoilingVerdict</code>. Ele aceita a temperatura em <code>celsius</code> como uma propriedade, e irá imprimir se é suficiente para ferver a água:</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span></span><span class="kd">function</span> <span class="nx">BoilingVerdict</span><span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">props</span><span class="p">.</span><span class="nx">celsius</span> <span class="o">&gt;=</span> <span class="mi">100</span><span class="p">)</span> <span class="p">{</span>
<span class="hll">    <span class="k">return</span> <span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span><span class="nx">The</span> <span class="nx">water</span> <span class="nx">would</span> <span class="nx">boil</span><span class="p">.</span><span class="o">&lt;</span><span class="err">/p&gt;;</span>
</span>  <span class="p">}</span>
<span class="hll">  <span class="k">return</span> <span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span><span class="nx">The</span> <span class="nx">water</span> <span class="nx">would</span> <span class="nx">not</span> <span class="nx">boil</span><span class="p">.</span><span class="o">&lt;</span><span class="err">/p&gt;;</span>
</span><span class="p">}</span>
</code></pre></div>
<p>A seguir, criamos um componente chamado <code>Calculator</code>. Ele renderiza um <code>&lt;input&gt;</code> que permite digitar a temperatura, e mantém seu valor em <code>this.state.value</code>.</p>

<p>Adicionalmente, renderizamos o <code>BoilingVerdict</code> para a entrada atual.</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span></span><span class="kr">class</span> <span class="nx">Calculator</span> <span class="kr">extends</span> <span class="nx">React</span><span class="p">.</span><span class="nx">Component</span> <span class="p">{</span>
  <span class="nx">constructor</span><span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="p">{</span>
    <span class="kr">super</span><span class="p">(</span><span class="nx">props</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">handleChange</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">handleChange</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
<span class="hll">    <span class="k">this</span><span class="p">.</span><span class="nx">state</span> <span class="o">=</span> <span class="p">{</span><span class="nx">value</span><span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">};</span>
</span>  <span class="p">}</span>

  <span class="nx">handleChange</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
<span class="hll">    <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span><span class="nx">value</span><span class="o">:</span> <span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span><span class="p">});</span>
</span>  <span class="p">}</span>

  <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
<span class="hll">    <span class="kr">const</span> <span class="nx">value</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>
</span>    <span class="k">return</span> <span class="p">(</span>
      <span class="o">&lt;</span><span class="nx">fieldset</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">legend</span><span class="o">&gt;</span><span class="nx">Enter</span> <span class="nx">temperature</span> <span class="k">in</span> <span class="nx">Celsius</span><span class="o">:&lt;</span><span class="err">/legend&gt;</span>
<span class="hll">        <span class="o">&lt;</span><span class="nx">input</span>
</span><span class="hll">          <span class="nx">value</span><span class="o">=</span><span class="p">{</span><span class="nx">value</span><span class="p">}</span>
</span><span class="hll">          <span class="nx">onChange</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">handleChange</span><span class="p">}</span> <span class="o">/&gt;</span>
</span><span class="hll">        <span class="o">&lt;</span><span class="nx">BoilingVerdict</span>
</span><span class="hll">          <span class="nx">celsius</span><span class="o">=</span><span class="p">{</span><span class="nb">parseFloat</span><span class="p">(</span><span class="nx">value</span><span class="p">)}</span> <span class="o">/&gt;</span>
</span>      <span class="o">&lt;</span><span class="err">/fieldset&gt;</span>
    <span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p><a href="http://codepen.io/gaearon/pen/Gjxgrj?editors=0010">Teste este código no CodePen.</a></p>
<h2><a class="anchor" name="adicionando-uma-segunda-entrada"></a>Adicionando uma segunda entrada <a class="hash-link" href="#adicionando-uma-segunda-entrada">#</a></h2>
<p>Nosso novo requisito é, a partir de um input em Celsius, prover um input em Fahrenheit, e manter as inputs sincronizados.</p>

<p>Podemos comerçar extraindo um componente <code>TemperatureInput</code> de <code>Calculator</code>. Iremos adicionar uma nova propriedade <code>scale</code> que pode ser <code>&quot;c&quot;</code> ou <code>&quot;f&quot;</code>:</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span></span><span class="hll"><span class="kr">const</span> <span class="nx">scaleNames</span> <span class="o">=</span> <span class="p">{</span>
</span><span class="hll">  <span class="nx">c</span><span class="o">:</span> <span class="s1">&#39;Celsius&#39;</span><span class="p">,</span>
</span><span class="hll">  <span class="nx">f</span><span class="o">:</span> <span class="s1">&#39;Fahrenheit&#39;</span>
</span><span class="hll"><span class="p">};</span>
</span>
<span class="kr">class</span> <span class="nx">TemperatureInput</span> <span class="kr">extends</span> <span class="nx">React</span><span class="p">.</span><span class="nx">Component</span> <span class="p">{</span>
  <span class="nx">constructor</span><span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="p">{</span>
    <span class="kr">super</span><span class="p">(</span><span class="nx">props</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">handleChange</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">handleChange</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">state</span> <span class="o">=</span> <span class="p">{</span><span class="nx">value</span><span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">};</span>
  <span class="p">}</span>

  <span class="nx">handleChange</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span><span class="nx">value</span><span class="o">:</span> <span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span><span class="p">});</span>
  <span class="p">}</span>

  <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
    <span class="kr">const</span> <span class="nx">value</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>
<span class="hll">    <span class="kr">const</span> <span class="nx">scale</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">scale</span><span class="p">;</span>
</span>    <span class="k">return</span> <span class="p">(</span>
      <span class="o">&lt;</span><span class="nx">fieldset</span><span class="o">&gt;</span>
<span class="hll">        <span class="o">&lt;</span><span class="nx">legend</span><span class="o">&gt;</span><span class="nx">Enter</span> <span class="nx">temperature</span> <span class="k">in</span> <span class="p">{</span><span class="nx">scaleNames</span><span class="p">[</span><span class="nx">scale</span><span class="p">]}</span><span class="o">:&lt;</span><span class="err">/legend&gt;</span>
</span>        <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">value</span><span class="o">=</span><span class="p">{</span><span class="nx">value</span><span class="p">}</span>
               <span class="nx">onChange</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">handleChange</span><span class="p">}</span> <span class="o">/&gt;</span>
      <span class="o">&lt;</span><span class="err">/fieldset&gt;</span>
    <span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Agora podemos alterar o <code>Calculator</code> para renderizar dois inputs de temperatura:</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span></span><span class="kr">class</span> <span class="nx">Calculator</span> <span class="kr">extends</span> <span class="nx">React</span><span class="p">.</span><span class="nx">Component</span> <span class="p">{</span>
  <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">(</span>
      <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
<span class="hll">        <span class="o">&lt;</span><span class="nx">TemperatureInput</span> <span class="nx">scale</span><span class="o">=</span><span class="s2">&quot;c&quot;</span> <span class="o">/&gt;</span>
</span><span class="hll">        <span class="o">&lt;</span><span class="nx">TemperatureInput</span> <span class="nx">scale</span><span class="o">=</span><span class="s2">&quot;f&quot;</span> <span class="o">/&gt;</span>
</span>      <span class="o">&lt;</span><span class="err">/div&gt;</span>
    <span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p><a href="http://codepen.io/gaearon/pen/NRrzOL?editors=0010">Teste este código no CodePen.</a></p>

<p>Agora temos dois inputs, mas quando você digita a temperatura em um delas, o outro não atualiza. Isto vai de encontro ao nosso requisito: nós queremos manter as inputs sincronizados.</p>

<p>Também não é possível exibir o <code>BoilingVerdict</code> de <code>Calculator</code>. O <code>Calculator</code> não sabe a temperatura atual porque está oculta dentro de <code>TemperatureInput</code>.</p>
<h2><a class="anchor" name="subindo-o-estado"></a>Subindo o estado <a class="hash-link" href="#subindo-o-estado">#</a></h2>
<p>Primeiro, escreveremos duas funções para converter de Celsius para Fahrenheit e de Fahrenheit para Celsius:</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span></span><span class="kd">function</span> <span class="nx">toCelsius</span><span class="p">(</span><span class="nx">fahrenheit</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">(</span><span class="nx">fahrenheit</span> <span class="o">-</span> <span class="mi">32</span><span class="p">)</span> <span class="o">*</span> <span class="mi">5</span> <span class="o">/</span> <span class="mi">9</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">toFahrenheit</span><span class="p">(</span><span class="nx">celsius</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">(</span><span class="nx">celsius</span> <span class="o">*</span> <span class="mi">9</span> <span class="o">/</span> <span class="mi">5</span><span class="p">)</span> <span class="o">+</span> <span class="mi">32</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<p>Estas duas funções convertem os números. Vamos escrever outra função que pega uma string <code>value</code> e uma função de conversão como argumento e retorna uma string. Vamos usar isso para calcular uma temperatura em uma escala baseado no valor do outro input.</p>

<p>O código retorna uma string vazia se um <code>value</code> inválido for informado, e mantém a saída arredondada até o terceiro decimal:</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span></span><span class="kd">function</span> <span class="nx">tryConvert</span><span class="p">(</span><span class="nx">value</span><span class="p">,</span> <span class="nx">convert</span><span class="p">)</span> <span class="p">{</span>
  <span class="kr">const</span> <span class="nx">input</span> <span class="o">=</span> <span class="nb">parseFloat</span><span class="p">(</span><span class="nx">value</span><span class="p">);</span>
  <span class="k">if</span> <span class="p">(</span><span class="nb">Number</span><span class="p">.</span><span class="nb">isNaN</span><span class="p">(</span><span class="nx">input</span><span class="p">))</span> <span class="p">{</span>
    <span class="k">return</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kr">const</span> <span class="nx">output</span> <span class="o">=</span> <span class="nx">convert</span><span class="p">(</span><span class="nx">input</span><span class="p">);</span>
  <span class="kr">const</span> <span class="nx">rounded</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">round</span><span class="p">(</span><span class="nx">output</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">)</span> <span class="o">/</span> <span class="mi">1000</span><span class="p">;</span>
  <span class="k">return</span> <span class="nx">rounded</span><span class="p">.</span><span class="nx">toString</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div>
<p>Por exemplo, <code>tryConvert(&#39;abc&#39;, toCelsius)</code> retorna uma string vazia, e <code>tryConvert(&#39;10.22&#39;, toFahrenheit)</code> retorna <code>&#39;50.396&#39;</code>.</p>

<p>A seguir, vamos remover o estado de <code>TemperatureInput</code>.</p>

<p>Ao invés disso, vamos recever ambos os <code>value</code> e o manipulador <code>onChange</code> como propriedade:</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span></span><span class="kr">class</span> <span class="nx">TemperatureInput</span> <span class="kr">extends</span> <span class="nx">React</span><span class="p">.</span><span class="nx">Component</span> <span class="p">{</span>
  <span class="nx">constructor</span><span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="p">{</span>
    <span class="kr">super</span><span class="p">(</span><span class="nx">props</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">handleChange</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">handleChange</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="nx">handleChange</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
<span class="hll">    <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">onChange</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span><span class="p">);</span>
</span>  <span class="p">}</span>

  <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
<span class="hll">    <span class="kr">const</span> <span class="nx">value</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>
</span>    <span class="kr">const</span> <span class="nx">scale</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">scale</span><span class="p">;</span>
    <span class="k">return</span> <span class="p">(</span>
      <span class="o">&lt;</span><span class="nx">fieldset</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">legend</span><span class="o">&gt;</span><span class="nx">Enter</span> <span class="nx">temperature</span> <span class="k">in</span> <span class="p">{</span><span class="nx">scaleNames</span><span class="p">[</span><span class="nx">scale</span><span class="p">]}</span><span class="o">:&lt;</span><span class="err">/legend&gt;</span>
        <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">value</span><span class="o">=</span><span class="p">{</span><span class="nx">value</span><span class="p">}</span>
               <span class="nx">onChange</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">handleChange</span><span class="p">}</span> <span class="o">/&gt;</span>
      <span class="o">&lt;</span><span class="err">/fieldset&gt;</span>
    <span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Se vários componentes precisam acessar o mesmo estado, é um sinal de que o estado deve ser subido para o ancestral comum mais próximo. No nosso caso, é o <code>Calculator</code>. Vamos guardar o atual <code>value</code> e <code>scale</code> no seu estado.</p>

<p>Podemos ter armazenado o valor de ambos os inputs, mas isto se torna desnecessário. É suficiente armazenar o valor do input que mudou mais recentemente, e a escala que o representa. Nós podemos então inferir o valor do outro input baseado no estado atual de <code>value</code> e <code>scale</code>.</p>

<p>Os inputs se mantém sincronizados porque seus valores são calculados a partir do mesmo estado:</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span></span><span class="kr">class</span> <span class="nx">Calculator</span> <span class="kr">extends</span> <span class="nx">React</span><span class="p">.</span><span class="nx">Component</span> <span class="p">{</span>
  <span class="nx">constructor</span><span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="p">{</span>
    <span class="kr">super</span><span class="p">(</span><span class="nx">props</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">handleCelsiusChange</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">handleCelsiusChange</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">handleFahrenheitChange</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">handleFahrenheitChange</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
<span class="hll">    <span class="k">this</span><span class="p">.</span><span class="nx">state</span> <span class="o">=</span> <span class="p">{</span><span class="nx">value</span><span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="nx">scale</span><span class="o">:</span> <span class="s1">&#39;c&#39;</span><span class="p">};</span>
</span>  <span class="p">}</span>

  <span class="nx">handleCelsiusChange</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
<span class="hll">    <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span><span class="nx">scale</span><span class="o">:</span> <span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="nx">value</span><span class="p">});</span>
</span>  <span class="p">}</span>

  <span class="nx">handleFahrenheitChange</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
<span class="hll">    <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span><span class="nx">scale</span><span class="o">:</span> <span class="s1">&#39;f&#39;</span><span class="p">,</span> <span class="nx">value</span><span class="p">});</span>
</span>  <span class="p">}</span>

  <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
<span class="hll">    <span class="kr">const</span> <span class="nx">scale</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">scale</span><span class="p">;</span>
</span><span class="hll">    <span class="kr">const</span> <span class="nx">value</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>
</span><span class="hll">    <span class="kr">const</span> <span class="nx">celsius</span> <span class="o">=</span> <span class="nx">scale</span> <span class="o">===</span> <span class="s1">&#39;f&#39;</span> <span class="o">?</span> <span class="nx">tryConvert</span><span class="p">(</span><span class="nx">value</span><span class="p">,</span> <span class="nx">toCelsius</span><span class="p">)</span> <span class="o">:</span> <span class="nx">value</span><span class="p">;</span>
</span><span class="hll">    <span class="kr">const</span> <span class="nx">fahrenheit</span> <span class="o">=</span> <span class="nx">scale</span> <span class="o">===</span> <span class="s1">&#39;c&#39;</span> <span class="o">?</span> <span class="nx">tryConvert</span><span class="p">(</span><span class="nx">value</span><span class="p">,</span> <span class="nx">toFahrenheit</span><span class="p">)</span> <span class="o">:</span> <span class="nx">value</span><span class="p">;</span>
</span>
    <span class="k">return</span> <span class="p">(</span>
      <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">TemperatureInput</span>
          <span class="nx">scale</span><span class="o">=</span><span class="s2">&quot;c&quot;</span>
<span class="hll">          <span class="nx">value</span><span class="o">=</span><span class="p">{</span><span class="nx">celsius</span><span class="p">}</span>
</span><span class="hll">          <span class="nx">onChange</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">handleCelsiusChange</span><span class="p">}</span> <span class="o">/&gt;</span>
</span>        <span class="o">&lt;</span><span class="nx">TemperatureInput</span>
          <span class="nx">scale</span><span class="o">=</span><span class="s2">&quot;f&quot;</span>
<span class="hll">          <span class="nx">value</span><span class="o">=</span><span class="p">{</span><span class="nx">fahrenheit</span><span class="p">}</span>
</span><span class="hll">          <span class="nx">onChange</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">handleFahrenheitChange</span><span class="p">}</span> <span class="o">/&gt;</span>
</span>        <span class="o">&lt;</span><span class="nx">BoilingVerdict</span>
<span class="hll">          <span class="nx">celsius</span><span class="o">=</span><span class="p">{</span><span class="nb">parseFloat</span><span class="p">(</span><span class="nx">celsius</span><span class="p">)}</span> <span class="o">/&gt;</span>
</span>      <span class="o">&lt;</span><span class="err">/div&gt;</span>
    <span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p><a href="http://codepen.io/gaearon/pen/ozdyNg?editors=0010">Teste este código no CodePen.</a></p>

<p>Agora, não importa qual input você edita, <code>this.state.value</code> e <code>this.state.scale</code> no <code>Calculator</code> é atualizado. Um dos valores recebe o valor como ele é, então a entrada do usuário é preservada, e o valor do outro input é sempre recalculado baseado nele.</p>
<h2><a class="anchor" name="lies-aprendidas"></a>Lições aprendidas <a class="hash-link" href="#lies-aprendidas">#</a></h2>
<p>Deve haver uma única &quot;fonte de verdade&quot; para quaisuquer dados que mudam em uma aplicação React. Geralmente, o estado é primeiro adicionado ao componente que precisa dele para renderização. Então, se outros componentes precisam dele, você pode subir até o ancestral comum mais próximo. Ao invés disso você pode sincronizar o estado entre diferentes componentes,
Usually, the state is first added to the component that needs it for rendering. Then, if other components also need it, you can lift it up to their closest common ancestor. Instead of trying to sync the state between different components, você pode contar com o <a href="/react/docs/state-and-lifecycle.html#the-data-flows-down">flux de dados de cima para baixo</a>.</p>

<p>Subir o estado envolve mais escrever código &quot;boilerrplate&quot; que a abordagem two-way binding, mas como um benefício, isto traz menos trabalho para localizar e isolar bugs. Como qualquer estado &quot;vive&quot; em algum componente este componente sozinho pode alterá-lo por si, a área para bugs é muito reduzida. Adicionalmente, você pode implementar qualquer lógica customizada para rejeitar ou transformar entradas do usuário.</p>

<p>Se algo pode ser entregue ou por propriedades(props) ou por estado(state), provavelmente não deve estar no estado. Por exemplo, ao invés de armazenar ambos <code>celsiusValue</code> e <code>fahrenheitValue</code>, armazenamos apenas o último <code>value</code> alterado e sua <code>scale</code>. O valor do outro input pode sempre ser calculado do outro no método <code>render()</code>. Isto possibilita limpar ou aplicar arredondamento ao outro campo sem perder qualquer precisão na entrada do usuário.</p>

<p>Quando você ver algo errado na interface do usuário, você pode usar as <a href="https://github.com/facebook/react-devtools">ferramentas de desenvolvedor do React </a> para inspecionar as propriedades e mover pela árvore até você encontrar o componente responsável por atualizar o estado. Isto permite rastrear os bugs até sua fonte:</p>

<p><img src="/reactdocs-pt_br/img/docs/react-devtools-state.gif" alt="Monitorando estado com React DevTools" width="100%"></p>


    <div class="docs-prevnext">
      
        <a class="docs-prev" href="/reactdocs-pt_br/docs/state-and-lifecycle.html">&larr; Anterior</a>
      
      
        <a class="docs-next" href="/reactdocs-pt_br/docs/composition-vs-inheritance.html">Próximo &rarr;</a>
      
    </div>
  </div>

  <div class="nav-docs">
  <!-- Docs Nav -->
  
    <div class="nav-docs-section">
      <h3>Quick Start</h3>
      <ul>
        
          <li>
            <a href="/reactdocs-pt_br/docs/installation.html">Instalação</a>
            
          </li>
        
          <li>
            <a href="/reactdocs-pt_br/docs/hello-world.html">Hello World</a>
            
          </li>
        
          <li>
            <a href="/reactdocs-pt_br/docs/introducing-jsx.html">Introdução ao JSX</a>
            
          </li>
        
          <li>
            <a href="/reactdocs-pt_br/docs/rendering-elements.html">Renderizando elementos</a>
            
          </li>
        
          <li>
            <a href="/reactdocs-pt_br/docs/components-and-props.html">Componentes e propriedades</a>
            
          </li>
        
          <li>
            <a href="/reactdocs-pt_br/docs/state-and-lifecycle.html">Estado(state) e ciclo de vida</a>
            
          </li>
        
          <li>
            <a href="/reactdocs-pt_br/docs/handling-events.html">Manipulando eventos</a>
            
          </li>
        
          <li>
            <a href="/reactdocs-pt_br/docs/conditional-rendering.html">Renderização condicional</a>
            
          </li>
        
          <li>
            <a href="/reactdocs-pt_br/docs/lists-and-keys.html">Listas e chaves</a>
            
          </li>
        
          <li>
            <a href="/reactdocs-pt_br/docs/forms.html">Formulários</a>
            
          </li>
        
          <li>
            <a href="/reactdocs-pt_br/docs/lifting-state-up.html" class="active">Subindo o estado</a>
            
          </li>
        
          <li>
            <a href="/reactdocs-pt_br/docs/composition-vs-inheritance.html">Composition vs Inheritance</a>
            
          </li>
        
          <li>
            <a href="/reactdocs-pt_br/docs/thinking-in-react.html">Thinking In React</a>
            
          </li>
        
      </ul>
    </div>
  
    <div class="nav-docs-section">
      <h3>Advanced Guides</h3>
      <ul>
        
          <li>
            <a href="/reactdocs-pt_br/docs/jsx-in-depth.html">JSX In Depth</a>
            
          </li>
        
          <li>
            <a href="/reactdocs-pt_br/docs/typechecking-with-proptypes.html">Typechecking With PropTypes</a>
            
          </li>
        
          <li>
            <a href="/reactdocs-pt_br/docs/refs-and-the-dom.html">Refs and the DOM</a>
            
          </li>
        
          <li>
            <a href="/reactdocs-pt_br/docs/uncontrolled-components.html">Uncontrolled Components</a>
            
          </li>
        
          <li>
            <a href="/reactdocs-pt_br/docs/optimizing-performance.html">Optimizing Performance</a>
            
          </li>
        
          <li>
            <a href="/reactdocs-pt_br/docs/react-without-es6.html">React Without ES6</a>
            
          </li>
        
          <li>
            <a href="/reactdocs-pt_br/docs/react-without-jsx.html">React Without JSX</a>
            
          </li>
        
          <li>
            <a href="/reactdocs-pt_br/docs/reconciliation.html">Reconciliation</a>
            
          </li>
        
          <li>
            <a href="/reactdocs-pt_br/docs/context.html">Context</a>
            
          </li>
        
          <li>
            <a href="/reactdocs-pt_br/docs/web-components.html">Web Components</a>
            
          </li>
        
          <li>
            <a href="/reactdocs-pt_br/docs/higher-order-components.html">Higher-Order Components</a>
            
          </li>
        
      </ul>
    </div>
  
    <div class="nav-docs-section">
      <h3>Reference</h3>
      <ul>
        
          <li>
            <a href="/reactdocs-pt_br/docs/react-api.html">React</a>
            
              <ul>
                
                  <li>
                    <a href="/reactdocs-pt_br/docs/react-component.html">React.Component</a>
                  </li>
                
              </ul>
            
          </li>
        
          <li>
            <a href="/reactdocs-pt_br/docs/react-dom.html">ReactDOM</a>
            
          </li>
        
          <li>
            <a href="/reactdocs-pt_br/docs/react-dom-server.html">ReactDOMServer</a>
            
          </li>
        
          <li>
            <a href="/reactdocs-pt_br/docs/dom-elements.html">DOM Elements</a>
            
          </li>
        
          <li>
            <a href="/reactdocs-pt_br/docs/events.html">SyntheticEvent</a>
            
          </li>
        
          <li>
            <a href="/reactdocs-pt_br/docs/addons.html">Add-Ons</a>
            
              <ul>
                
                  <li>
                    <a href="/reactdocs-pt_br/docs/perf.html">Performance Tools</a>
                  </li>
                
                  <li>
                    <a href="/reactdocs-pt_br/docs/test-utils.html">Test Utilities</a>
                  </li>
                
                  <li>
                    <a href="/reactdocs-pt_br/docs/animation.html">Animation</a>
                  </li>
                
                  <li>
                    <a href="/reactdocs-pt_br/docs/create-fragment.html">Keyed Fragments</a>
                  </li>
                
                  <li>
                    <a href="/reactdocs-pt_br/docs/update.html">Immutability Helpers</a>
                  </li>
                
                  <li>
                    <a href="/reactdocs-pt_br/docs/pure-render-mixin.html">PureRenderMixin</a>
                  </li>
                
                  <li>
                    <a href="/reactdocs-pt_br/docs/shallow-compare.html">Shallow Compare</a>
                  </li>
                
                  <li>
                    <a href="/reactdocs-pt_br/docs/two-way-binding-helpers.html">Two-way Binding Helpers</a>
                  </li>
                
              </ul>
            
          </li>
        
      </ul>
    </div>
  

  <!-- Contributing Nav -->
  
    <div class="nav-docs-section">
      <h3>Contributing</h3>
      <ul>
        
          <li>
            <a href="/react/contributing/how-to-contribute.html">How to Contribute</a>
          </li>
        
          <li>
            <a href="/react/contributing/codebase-overview.html">Codebase Overview</a>
          </li>
        
          <li>
            <a href="/react/contributing/implementation-notes.html">Implementation Notes</a>
          </li>
        
          <li>
            <a href="/react/contributing/design-principles.html">Design Principles</a>
          </li>
        
      </ul>
    </div>
  

</div>

</section>


    <footer class="nav-footer">
  <section class="sitemap">
    <a href="/react/" class="nav-home">
    </a>
    <div>
      <h5><a href="/react/docs/">Docs</a></h5>
      <a href="/reactdocs-pt_br/docs/hello-world.html">Quick Start</a>
      <a href="/reactdocs-pt_br/docs/thinking-in-react.html">Thinking in React</a>
      <a href="/react/tutorial/tutorial.html">Tutorial</a>
      <a href="/reactdocs-pt_br/docs/jsx-in-depth.html">Advanced Guides</a>
    </div>
    <div>
      <h5><a href="/react/community/support.html">Community</a></h5>
      <a href="http://stackoverflow.com/questions/tagged/reactjs" target="_blank">Stack Overflow</a>
      <a href="https://discuss.reactjs.org/" target="_blank">Discussion Forum</a>
      <a href="https://discord.gg/0ZcbPKXt5bZjGY5n" target="_blank">Reactiflux Chat</a>
      <a href="https://www.facebook.com/react" target="_blank">Facebook</a>
      <a href="https://twitter.com/reactjs" target="_blank">Twitter</a>
    </div>
    <div>
      <h5><a href="/react/community/support.html">Resources</a></h5>
      <a href="/react/community/conferences.html">Conferences</a>
      <a href="/react/community/videos.html">Videos</a>
      <a href="https://github.com/facebook/react/wiki/Examples" target="_blank">Examples</a>
      <a href="https://github.com/facebook/react/wiki/Complementary-Tools" target="_blank">Complementary Tools</a>
    </div>
    <div>
      <h5>More</h5>
      <a href="/react/blog/">Blog</a>
      <a href="https://github.com/facebook/react" target="_blank">GitHub</a>
      <a href="http://facebook.github.io/react-native/" target="_blank">React Native</a>
      <a href="/react/acknowledgements.html">Acknowledgements</a>
    </div>
  </section>
  <a href="https://code.facebook.com/projects/" target="_blank" class="fbOpenSource">
    <img src="/reactdocs-pt_br/img/oss_logo.png" alt="Facebook Open Source" width="170" height="45"/>
  </a>
  <section class="copyright">
    Copyright © 2016 Facebook Inc.
  </section>
</footer>

  </div>

  <div id="fb-root"></div>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-41298772-1', 'facebook.github.io');
    ga('send', 'pageview');

    !function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="https://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");

    (function(d, s, id) {
      var js, fjs = d.getElementsByTagName(s)[0];
      if (d.getElementById(id)) return;
      js = d.createElement(s); js.id = id;
      js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.6&appId=623268441017527";
      fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));
  </script>
</body>
</html>
